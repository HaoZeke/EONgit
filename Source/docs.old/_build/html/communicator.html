<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Communicator &mdash; eOn v1.0 documentation</title>
    <link rel="stylesheet" href="_static/eon.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/http://theory.cm.utexas.edu/MathJax/MathJax.js"></script>
    <link rel="top" title="eOn v1.0 documentation" href="index.html" />
    <link rel="next" title="Potentials" href="potentials.html" />
    <link rel="prev" title="Setup" href="setup.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="potentials.html" title="Potentials"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="setup.html" title="Setup"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">eOn v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="communicator">
<span id="id1"></span><h1>Communicator<a class="headerlink" href="#communicator" title="Permalink to this headline">¶</a></h1>
<p>Eon has a server client architecture for running its calculations. The
simulation data is stored on the server and clients are sent jobs and return
the results. Each time eon is run it first checks to see if any results have
come back from clients and processes them accordingly and then submits more
searches if needed. In eon there are several different ways to run jobs. One
can run them locally on the server, using a job queuing system such as <a class="reference external" href="http://wikis.sun.com/display/sungridengine/Home">SGE</a>,
using a distributed computing system such as <a class="reference external" href="http://boinc.berkeley.edu/">BOINC</a>, or grid computing
middleware such as <a class="reference external" href="http://www.nordugrid.org/arc/">ARC</a>.</p>
<p>These are options that go in the <strong>[Communicator]</strong> section and apply to all of
the different communicator types.</p>
<p><strong>type</strong>:</p>
<blockquote>
<p>Default: local</p>
<p>Options:</p>
<blockquote>
<p><a class="reference internal" href="#communicator-local"><em>local</em></a>: The local communicator runs the
calculations on the same computer that the server is run on.</p>
<p><a class="reference internal" href="#communicator-cluster"><em>cluster</em></a>: A job scheduler can be used to
run jobs through user supplied shell scripts. Examples are given for
SGE.</p>
<p><a class="reference internal" href="#communicator-boinc"><em>boinc</em></a>: Jobs can be submitted to a BOINC
project.</p>
<p><a class="reference internal" href="#communicator-arc"><em>arc</em></a>: Jobs can be submitted to the grid
computing software ARC.</p>
</blockquote>
</blockquote>
<p><strong>num_jobs</strong>:</p>
<blockquote>
<p>Default: 1</p>
<p>The meaning of the variable changes depending on the communicator <strong>type</strong>.</p>
<p>For the <em>local</em> communicator <strong>num_jobs</strong> number of jobs will be run every
time the program is invoked.</p>
<p>For the <em>cluser</em> communicator <strong>num_jobs</strong> is the desired sum of the queued
and running jobs. That is it should be set to the total number of jobs that
the user would like to run at once and the script will submit jobs to the
queue as needed to try to achieve the target number.</p>
<p>When using the <em>boinc</em> communicator one often wants to make enough work to
keep all of the clients busy. So instead of <strong>num_jobs</strong> being the total
number of jobs to run it sets the number of jobs to keep in the queue.
This way a buffer of <strong>num_jobs</strong>/<strong>jobs_per_bundle</strong> workunits are always
kept in the BOINC queue.</p>
</blockquote>
<p><strong>jobs_per_bundle</strong>:</p>
<blockquote>
<p>Default: 1</p>
<p>In eon a job is defined as task that the eon client executes, such as a
process search or a parallel replica run. Sometimes it makes sense to run
more than one of the same type of job at a time.</p>
<p>For example, when using empirical potentials to do saddle searches a single
search might only take several seconds on modern CPUs. In order to improve
performance more than one client job (<em>e.g.</em>, process search, dimer,
minimization) can be run at the same time. This can be used to make BOINC
workunits take several minutes when a single process search for the system
might only take several seconds.</p>
</blockquote>
<div class="section" id="local">
<span id="communicator-local"></span><h2>Local<a class="headerlink" href="#local" title="Permalink to this headline">¶</a></h2>
<p>When eon is run with the local communicator, <strong>number_of_cpus</strong> bundles are run
in parallel until <strong>num_jobs</strong> jobs have been run. The program will not exit
until all of the jobs have finished running.</p>
<p><strong>client_path</strong>:</p>
<blockquote>
<p>Default: eonclient</p>
<p>Either the name or path to the eon client binary. If only a name and not a path
is given then eon looks for the binary in same directory as config.ini failing to
find it there it will search though the directories in the $PATH environment
variable.</p>
</blockquote>
<p><strong>number_of_cpus</strong>:</p>
<blockquote>
<p>Default: 1</p>
<p>The number of jobs that will run simultaneously.</p>
</blockquote>
</div>
<div class="section" id="cluster">
<span id="communicator-cluster"></span><h2>Cluster<a class="headerlink" href="#cluster" title="Permalink to this headline">¶</a></h2>
<p>The cluster communicator works by calling a set of three user provided scripts to
talk to the job scheduler. An example of these scripts for SGE 6.2 is provided
in <strong>tools/clusters/sge6.2</strong>. They will most likely need to be modified to run
on your system.</p>
<p><strong>script_path</strong>:</p>
<blockquote>
<p>Default: ./</p>
<p>The path to the user defined scripts for submitting jobs to the communicator.</p>
</blockquote>
<p><strong>name_prefix</strong>:</p>
<blockquote>
<p>Default: eon</p>
<p>When jobs are submitted to the scheduler they are given a unique internally
used named. In order to make the jobs identifiable by the user the
<strong>name_prefix</strong> can be set to a meaningful string that will always be prepended
to the job names.</p>
</blockquote>
<p><strong>queued_jobs</strong>:</p>
<blockquote>
<p>Default: queued_jobs.sh</p>
<p>This is the name of the script that returns the job ids of all the running and
queued jobs. It does not have to return the job ids of only eon related jobs.</p>
</blockquote>
<p><strong>submit_job</strong>:</p>
<blockquote>
<p>Default: submit_job.sh</p>
<p>This is the name of the script that submits a single job to the queuing system.
It takes two command line arguments. The first is the name of the job. This is
not required for eon use, but is highly recommended so that users can identify
which job is which. The second argument is the working directory. This is the
path where the eon client should be executed. All of the needed client files
will be placed in this directory. The script must return the job id of the
submitted job. This is how eon internally keeps track of jobs.</p>
</blockquote>
<p><strong>cancel_job</strong>:</p>
<blockquote>
<p>Default: cancel_job.sh</p>
<p>This is the name of the script that cancels a job. It takes a single argument
the job id.</p>
</blockquote>
</div>
<div class="section" id="communicator-boinc">
<span id="id2"></span><h2>Boinc<a class="headerlink" href="#communicator-boinc" title="Permalink to this headline">¶</a></h2>
<p>The BOINC communicator allows eon to submit workunits to a BOINC project.</p>
<p><strong>boinc_project_dir</strong>:</p>
<blockquote>
<p>Default: None</p>
<p>This is the full path to the root of the BOINC project directory.</p>
</blockquote>
<p><strong>boinc_wu_template_path</strong>:</p>
<blockquote>
<p>Default: None</p>
<p>This is the path, relative from the <strong>boinc_project_dir</strong>, to the boinc
workunit template.</p>
</blockquote>
<p><strong>boinc_re_template_path</strong>:</p>
<blockquote>
<p>Default: None</p>
<p>This is the path, relative from the <strong>boinc_project_dir</strong>, to the boinc
result template.</p>
</blockquote>
<p><strong>boinc_appname</strong>:</p>
<blockquote>
<p>Default: eonclient</p>
<p>This is the name of the application in BOINC.</p>
</blockquote>
<p><strong>boinc_results_path</strong>:</p>
<blockquote>
<p>Default: <strong>boinc_project_dir</strong>/sample_results</p>
<p>This is the path where BOINC puts the final results. If you are using
the sample_assimilator the results are stored in the project directory
in a folder named &#8220;sample_results&#8221;.</p>
</blockquote>
</div>
<div class="section" id="communicator-arc">
<span id="id3"></span><h2>Arc<a class="headerlink" href="#communicator-arc" title="Permalink to this headline">¶</a></h2>
<p>Todo</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>These examples only submit a single search as the <strong>search_buffer_size</strong> defaults to 1.</p>
<div class="section" id="id4">
<h3>Local<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>An example communicator section using the local communicator with an eon client
binary named &#8220;eonclient-custom&#8221; that either exists in the <strong>$PATH</strong> or in the
same directory as config.ini and uses makes use of 8 CPUs.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[Communicator]</span>
<span class="na">type</span> <span class="o">=</span> <span class="s">local</span>
<span class="na">client_path</span> <span class="o">=</span> <span class="s">eonclient-custom</span>
<span class="na">number_of_cpus</span> <span class="o">=</span> <span class="s">8</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>Cluster<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>An example communicator section for the cluster communicator using the provided
sge6.2 scripts and a name prefix of &#8220;al_diffusion_&#8221;:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[Communicator]</span>
<span class="na">type</span><span class="o">=</span><span class="s">cluster</span>
<span class="na">name_prefix</span><span class="o">=</span><span class="s">al_diffusion_</span>
<span class="na">script_path</span><span class="o">=</span><span class="s">/home/user/eon/tools/clusters/sge6.2</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Communicator</a><ul>
<li><a class="reference external" href="#local">Local</a></li>
<li><a class="reference external" href="#cluster">Cluster</a></li>
<li><a class="reference external" href="#communicator-boinc">Boinc</a></li>
<li><a class="reference external" href="#communicator-arc">Arc</a></li>
<li><a class="reference external" href="#examples">Examples</a><ul>
<li><a class="reference external" href="#id4">Local</a></li>
<li><a class="reference external" href="#id5">Cluster</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="setup.html"
                                  title="previous chapter">Setup</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="potentials.html"
                                  title="next chapter">Potentials</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/communicator.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="potentials.html" title="Potentials"
             >next</a> |</li>
        <li class="right" >
          <a href="setup.html" title="Setup"
             >previous</a> |</li>
        <li><a href="index.html">eOn v1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010,  .
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.6.
    </div>
  </body>
</html>